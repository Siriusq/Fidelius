var argonWorker;function copyPwdToClipboard(copyValue){var clipboard=new ClipboardJS("#btnCopy",{container:document.getElementById("resultModal"),text:function(){return copyValue}}),copyBtn=document.getElementById("btnCopy");clipboard.on("success",(function(e){setTimeout((function(){"复制成功"==copyBtn.innerText&&(copyBtn.innerText="复制")}),3e3),copyBtn.innerText="复制成功"})),clipboard.on("error",(function(e){setTimeout((function(){"复制失败"==copyBtn.innerText&&(copyBtn.innerText="复制")}),3e3),copyBtn.innerText="复制失败"}));var clipboardAndClose=new ClipboardJS("#btnCopyClose",{container:document.getElementById("resultModal"),text:function(){return copyValue}})}function showPwdOutput(){var pwdOutput=document.getElementById("pwdOutput"),showOrHidePwd=document.getElementById("showOrHidePwd");"password"==pwdOutput.getAttribute("type")?(pwdOutput.setAttribute("type","text"),showOrHidePwd.innerText="隐藏"):(pwdOutput.setAttribute("type","password"),showOrHidePwd.innerText="显示")}function pwdQualityCal(pwdRes){var qualityScore=PasswordQualityCalculator(pwdRes),qualityBar=document.getElementById("qualityBar"),qualityText=document.getElementById("qualityText");qualityBar.style.width=.8*qualityScore+"%",qualityScore>=112?(qualityBar.innerText=qualityScore+" bits",qualityBar.className="progress-bar progress-bar-striped progress-bar-animated bg-info",qualityText.innerText="密码强度评估：极强",qualityText.className="text-info"):qualityScore>=80?(qualityBar.innerText=qualityScore+" bits",qualityBar.className="progress-bar progress-bar-striped progress-bar-animated bg-success",qualityText.innerText="密码强度评估：强",qualityText.className="text-success"):qualityScore>=64?(qualityBar.innerText=qualityScore+" bits",qualityBar.className="progress-bar progress-bar-striped progress-bar-animated bg-warning",qualityText.innerText="密码强度评估：中等",qualityText.className="text-warning"):(qualityBar.innerText=qualityScore+" bits",qualityBar.className="progress-bar progress-bar-striped progress-bar-animated bg-danger",qualityText.innerText="密码强度评估：弱",qualityText.className="text-danger")}!function(){"use strict";const popoverElements=document.querySelectorAll('[data-bs-toggle="popover"]');for(const popover of popoverElements)new bootstrap.Popover(popover);const tooltipElements=document.querySelectorAll('[data-bs-toggle="tooltip"]');for(const tooltip of tooltipElements)new bootstrap.Tooltip(tooltip);document.querySelector("body").addEventListener("click",(function(e){var in_popover;if(!e.target.closest(".popover")){var popovers=document.querySelectorAll(".popover.show");if(popovers[0]){var triggler_selector=`[aria-describedby=${popovers[0].id}]`;if(!e.target.closest(triggler_selector)){let the_trigger=document.querySelector(triggler_selector);the_trigger&&bootstrap.Popover.getInstance(the_trigger).hide()}}}}))}(),document.getElementById("generatePwd").onclick=function(){var memoryCodeEl=document.getElementById("memoryCode"),distinguishMarkEl=document.getElementById("distinguishMark"),distinguishMarkValue=document.getElementById("distinguishMark").value,generateTimeValue=document.getElementById("generateTime").value,containSymbolsValue=document.getElementById("containSymbols").checked,pwdLengthValue=document.getElementById("pwdLength").value,containUppercaseValue=document.getElementById("containUppercase").checked,iterationValue=document.getElementById("iteration").value,parallelismValue=document.getElementById("parallelism").value,memoryUsageValue=document.getElementById("memoryUsage").value,hashLengthValue=document.getElementById("hashLength").value;if(memoryCodeEl.value.length<8)return memoryCodeEl.setAttribute("placeholder","必须输入8位以上记忆密码"),memoryCodeEl.classList.add("is-invalid"),void(memoryCodeEl.value="");if(0==distinguishMarkValue.length)return distinguishMarkEl.setAttribute("placeholder","必须输入区分代码"),void distinguishMarkEl.classList.add("is-invalid");var loadingSpinner=document.getElementById("loadingSpinner"),punctuation;for(loadingSpinner.style.opacity=1,loadingSpinner.style.display="flex";distinguishMarkValue.length<16;)distinguishMarkValue+=distinguishMarkValue;var checkedSymbols=document.querySelectorAll('[name="customSymbol"]:checked');punctuation=0!=checkedSymbols.length?Array.from(checkedSymbols).map(x=>x.value):["~","*","-","+","(",")","!","@","#","$","^","&"],document.getElementById("pwdOutput").setAttribute("type","password"),document.getElementById("showOrHidePwd").innerText="显示",argonWorker||(argonWorker=new Worker("./js/fidelius.min.js")),argonWorker.postMessage([memoryCodeEl.value,distinguishMarkValue+generateTimeValue,hashLengthValue,iterationValue,memoryUsageValue,parallelismValue,pwdLengthValue,containSymbolsValue,containUppercaseValue,punctuation]),argonWorker.onmessage=function(event){var res=event.data,myModal;document.getElementById("pwdOutput").value=res,pwdQualityCal(res),copyPwdToClipboard(res),loadingSpinner.style.opacity=0,setTimeout(()=>{loadingSpinner.style.display="none"},300),new bootstrap.Modal(document.getElementById("resultModal")).show()}},document.getElementById("memoryCode").onkeyup=function(){var memoryCodeEl=document.getElementById("memoryCode");memoryCodeEl.value.length<8||memoryCodeEl.classList.remove("is-invalid")},document.getElementById("distinguishMark").onkeyup=function(){var distinguishMarkEl=document.getElementById("distinguishMark");0!=distinguishMarkEl.value.length&&distinguishMarkEl.classList.remove("is-invalid")};